import{x as _,j as B,k as I,m as S,r as c,c as l,u as e,a as t,h as x,d as A,e as p,w as D,R as E,t as a,g as N,v as w,F as h,p as L,o as u}from"./index-CghtLdCN.js";import{_ as R,s as V,u as C}from"./_plugin-vue_export-helper-CTeH0xlD.js";import{f as i}from"./util-BrY1QKZh.js";import"./api-CO81Q8j0.js";const F={key:0},M={class:"italic title"},P={class:"stats"},U={key:0},j={key:0,class:"empty"},H={key:1},b={key:1},q={__name:"TaskDetailPage",setup(z){const v=S(),T=_(),f=parseInt(T.params.id),n=V.tasks.find(r=>r.id===f);B(()=>{document.addEventListener("keydown",k)}),I(()=>{document.removeEventListener("keydown",k)});const k=r=>{r.key==="Escape"&&v.push("/")},d=c(!1),m=c(n.notes),y=async()=>{d.value=!0,await C(n.id,m.value),d.value=!1};return(r,s)=>e(n)?(u(),l("div",F,[t("p",null,[A(e(E),{to:"/"},{default:D(()=>[...s[1]||(s[1]=[p("Tasks",-1)])]),_:1}),p(" / "+a(e(n).title),1)]),t("h1",M,a(e(n).icon)+" "+a(e(n).title),1),t("div",P,[t("p",null," Avg. Estimated Time: "+a(e(i)(e(n).getAvgEstTime())),1),t("p",null," Avg. Actual Time: "+a(e(i)(e(n).getAvgRealTime())),1),t("p",null," Avg. Bias: "+a(e(i)(e(n).getAvgTimeBias()))+" ("+a(e(n).getAvgTimeBiasPercentage()?.toFixed(1))+"%) ",1),t("p",null,"Total Instances: "+a(e(n).taskInstances.length),1)]),s[4]||(s[4]=t("hr",null,null,-1)),t("h3",null,[s[2]||(s[2]=p(" Task notes ",-1)),d.value?(u(),l("span",U,"*")):N("",!0)]),x(t("textarea",{onChange:y,"onUpdate:modelValue":s[0]||(s[0]=o=>m.value=o),name:"task-notes"},null,544),[[w,m.value]]),s[5]||(s[5]=t("hr",null,null,-1)),s[6]||(s[6]=t("h3",null,"Task Instances",-1)),e(n).taskInstances.length===0?(u(),l("div",j,[...s[3]||(s[3]=[t("p",null,"No instances yet. Start tracking!",-1)])])):(u(),l("ul",H,[(u(!0),l(h,null,L(e(n).taskInstances,(o,g)=>(u(),l("li",{key:g,class:"instance"},[t("strong",null,"Instance "+a(g+1),1),t("p",null," Started: "+a(new Date(o.timestampStarted).toLocaleString()),1),t("p",null," Estimated: "+a(e(i)(o.estDurationSec)),1),t("p",null," Actual: "+a(e(i)(o.realDurationSec)),1),t("p",null," Bias: "+a(e(i)(o.getTimeBias()))+" ("+a((o.getTimeBias()/o.estDurationSec*100).toFixed(1))+"%) ",1)]))),128))]))])):(u(),l("div",b,[...s[7]||(s[7]=[t("p",null,"Task not found",-1)])]))}},Q=R(q,[["__scopeId","data-v-431c32cd"]]);export{Q as default};
